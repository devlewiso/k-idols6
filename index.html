<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-IDOLS del Saber ‚ú® (6 A√±os)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700;800&family=Fredoka+One&display=swap');
        
        * {
            font-family: 'Fredoka', sans-serif;
        }
        
        body {
            /* Degradado K-Pop Neon */
            background: linear-gradient(135deg, #ff1493 0%, #ff69b4 25%, #00d4ff 50%, #00e5ff 75%, #fff700 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .main-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 182, 193, 0.9) 100%);
            backdrop-filter: blur(10px);
            border: 4px solid #ff1493;
            box-shadow: 
                0 0 30px rgba(255, 20, 147, 0.6),
                0 0 60px rgba(0, 212, 255, 0.4),
                0 10px 40px rgba(0, 0, 0, 0.2);
            max-width: 95%;
            width: 550px;
            border-radius: 30px;
            animation: heartbeat 2s ease-in-out infinite;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .title-main {
            font-family: 'Fredoka One', cursive;
            font-size: 3.5rem;
            background: linear-gradient(135deg, #ff1493, #00d4ff, #fff700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 3px 3px 0px rgba(255, 20, 147, 0.3);
            letter-spacing: 2px;
            animation: glow 2s ease-in-out infinite;
        }
        
        @keyframes glow {
            0%, 100% { filter: drop-shadow(0 0 5px rgba(255, 20, 147, 0.6)); }
            50% { filter: drop-shadow(0 0 15px rgba(0, 212, 255, 0.8)); }
        }
        
        .game-button {
            font-family: 'Fredoka One', cursive;
            font-size: 1.3rem;
            font-weight: 800;
            padding: 1rem 1.5rem;
            border: 4px solid;
            border-radius: 20px;
            transition: all 0.2s;
            cursor: pointer;
            box-shadow: 0 8px 0 rgba(0, 0, 0, 0.2);
            position: relative;
            top: 0;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
        
        .game-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 0 rgba(0, 0, 0, 0.2);
        }
        
        .game-button:active {
            transform: translateY(-1px);
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
        }
        
        .btn-pink {
            background: linear-gradient(135deg, #ff1493, #ff69b4);
            color: white;
            border-color: #ff1493;
        }
        
        .btn-cyan {
            background: linear-gradient(135deg, #00d4ff, #00e5ff);
            color: #ff1493;
            border-color: #00d4ff;
            font-weight: 800;
        }
        
        .btn-yellow {
            background: linear-gradient(135deg, #fff700, #ffeb3b);
            color: #ff1493;
            border-color: #fff700;
            font-weight: 800;
        }
        
        .option-tile {
            background: linear-gradient(135deg, rgba(255, 20, 147, 0.1), rgba(0, 212, 255, 0.1));
            border: 3px solid #ff1493;
            border-radius: 18px;
            padding: 1rem;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            color: #ff1493;
            box-shadow: 0 4px 0 rgba(255, 20, 147, 0.3);
        }
        
        .option-tile:hover {
            transform: translateY(-3px);
            background: linear-gradient(135deg, rgba(255, 20, 147, 0.2), rgba(0, 212, 255, 0.2));
            box-shadow: 0 0 20px rgba(255, 20, 147, 0.5);
        }
        
        .option-tile:active {
            transform: translateY(0);
            box-shadow: 0 2px 0 rgba(255, 20, 147, 0.3);
        }
        
        .correct-answer {
            background: linear-gradient(135deg, #fff700, #ffeb3b) !important;
            border-color: #fff700 !important;
            color: #ff1493 !important;
            transform: scale(1.08) !important;
            box-shadow: 0 0 30px rgba(255, 235, 59, 1) !important;
            animation: sparkle 0.6s ease-out;
        }
        
        @keyframes sparkle {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.15); }
            100% { transform: scale(1.08); opacity: 1; }
        }
        
        .incorrect-answer {
            background: linear-gradient(135deg, #ff69b4, #ff1493) !important;
            border-color: #ff1493 !important;
            opacity: 0.5 !important;
            animation: shake 0.4s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }
        
        .game-header {
            background: linear-gradient(135deg, #ff1493, #00d4ff);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 20px rgba(255, 20, 147, 0.4);
        }
        
        .level-badge {
            background: linear-gradient(135deg, #fff700, #ffeb3b);
            color: #ff1493;
            font-weight: 800;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 1.2rem;
            display: inline-block;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
        }
        
        .score-badge {
            background: linear-gradient(135deg, #00e5ff, #00d4ff);
            color: #ff1493;
            font-weight: 800;
            padding: 0.7rem 1.5rem;
            border-radius: 20px;
            font-size: 1.3rem;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.6);
        }
        
        .display-content {
            background: linear-gradient(135deg, rgba(255, 235, 59, 0.2), rgba(0, 212, 255, 0.2));
            border: 4px dashed #ff1493;
            border-radius: 20px;
            padding: 2rem;
            font-size: 4rem;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin: 1.5rem 0;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .message-box {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .message-content {
            background: linear-gradient(135deg, #ff1493, #00d4ff);
            border: 5px solid #fff700;
            border-radius: 25px;
            padding: 2.5rem;
            text-align: center;
            color: white;
            font-size: 2rem;
            font-weight: 800;
            box-shadow: 0 0 50px rgba(255, 20, 147, 0.8);
            animation: popIn 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        @keyframes popIn {
            0% { transform: scale(0.3); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .star-emoji {
            display: inline-block;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="app" class="app-container"></div>

    <script type="module">
        const app = document.getElementById('app');
        let currentScreen = 'mainMenu';
        let currentLevel = 1;
        let score = 0;
        let gameData = {};
        
        // --- Datos de los Juegos (Edici√≥n 6 A√±os) ---
        
        // Matem√°ticas: Contar, Suma, Resta y Secuencias (hasta 15)
        const MATH_QUESTIONS = [
            // Nivel 1: Contar hasta 15
            { type: 'count', object: 'planetas ü™ê', count: 12, max: 15, level: 1 },
            { type: 'count', object: 'rayos ‚ö°', count: 10, max: 13, level: 1 },
            { type: 'count', object: 'pociones üß™', count: 14, max: 16, level: 1 },
            { type: 'count', object: 'escudos üõ°Ô∏è', count: 11, max: 14, level: 1 },
            { type: 'count', object: 'diamantes üíé', count: 15, max: 17, level: 1 },

            // Nivel 2: Suma hasta 12
            { type: 'sum', num1: 5, num2: 4, max: 10, level: 2 },
            { type: 'sum', num1: 7, num2: 3, max: 11, level: 2 },
            { type: 'sum', num1: 8, num2: 4, max: 13, level: 2 },
            { type: 'sum', num1: 6, num2: 5, max: 12, level: 2 },
            { type: 'sum', num1: 9, num2: 2, max: 12, level: 2 },

            // Nivel 3: Resta hasta 15 y Secuencias
            { type: 'subtract', num1: 13, num2: 4, max: 10, level: 3 },
            { type: 'subtract', num1: 15, num2: 5, max: 11, level: 3 },
            { type: 'subtract', num1: 12, num2: 7, max: 8, level: 3 },
            // Secuencias simples
            { type: 'sequence', start: 2, step: 2, missing: 4, max: 10, question: '¬øCu√°l es el siguiente n√∫mero en la secuencia: 2, 4, 6, 8, ?', answer: 10, level: 3},
            { type: 'sequence', start: 1, step: 3, missing: 10, max: 13, question: 'Completa la serie: 1, 4, 7, ?', answer: 10, level: 3},
        ];

        // Lectura y Lenguaje: S√≠labas m√°s variadas, Rimas y Comprensi√≥n simple.
        const READING_QUESTIONS = [
            // Nivel 1: Letra inicial (Consonante m√°s compleja o diptongos iniciales)
            { question: "¬øQu√© palabra empieza con 'PL'?", answer: 'PLATO', options: ['PLATO', 'PATO', 'PASTO'], level: 1 },
            { question: "¬øQu√© palabra empieza con 'CH'?", answer: 'CHOCOLATE', options: ['CHOCOLATE', 'COCHE', 'CALLE'], level: 1 },
            { question: "¬øQu√© palabra empieza con 'CL'?", answer: 'CLAVO', options: ['CLAVO', 'CAMA', 'CASA'], level: 1 },
            { question: "¬øQu√© palabra empieza con 'BR'?", answer: 'BROCHA', options: ['BOCA', 'BROCHA', 'BOTA'], level: 1 },
            { question: "¬øQu√© s√≠laba hace falta en _ __ SA?", answer: 'CA', options: ['CO', 'CU', 'CA'], level: 1 },

            // Nivel 2: Identificaci√≥n de s√≠labas medias y rimas
            { question: "¬øQu√© s√≠laba est√° en medio de 'ME_ _SA'?", answer: 'SA', options: ['PA', 'SO', 'SA'], level: 2 },
            { question: "Selecciona la palabra que rima con 'RAT√ìN'.", answer: 'JAB√ìN', options: ['PERRO', 'MESA', 'JAB√ìN'], level: 2 },
            { question: "Selecciona la palabra que rima con 'CASA'.", answer: 'MESA', options: ['RISA', 'MESA', 'PALA'], level: 2 },
            { question: "¬øCu√°l es el segundo sonido de 'C O N E J O'?", answer: 'O', options: ['C', 'N', 'O'], level: 2 },
            { question: "¬øCu√°l es la √∫ltima s√≠laba de 'BOTELLA'?", answer: 'LLA', options: ['BO', 'LLA', 'TE'], level: 2 },

            // Nivel 3: Comprensi√≥n simple y categorizaci√≥n
            { question: "Selecciona el objeto que necesitas para ESCRIBIR.", answer: 'L√ÅPIZ', options: ['CUCHARA', 'ZAPATO', 'L√ÅPIZ'], level: 3 },
            { question: "Selecciona la categor√≠a correcta: PERRO, GATO, CONEJO.", answer: 'ANIMALES', options: ['COMIDA', 'ANIMALES', 'ROPA'], level: 3 },
            { question: "Si hace FR√çO, ¬øqu√© te pones?", answer: 'ABRIGO', options: ['TRAJE DE BA√ëO', 'ABRIGO', 'SANDALIAS'], level: 3 },
            { question: "¬øCu√°l de estos NO es una fruta?", answer: 'ZANAHORIA', options: ['MANZANA', 'ZANAHORIA', 'FRESA'], level: 3 },
            { question: "Selecciona el ant√≥nimo de 'GRANDE'.", answer: 'PEQUE√ëO', options: ['ALTO', 'CHICO', 'PEQUE√ëO'], level: 3 },
        ];

        // Ciencias Sociales: Comunidad, Sentidos y el Mundo.
        const SOCIAL_QUESTIONS = [
            // Nivel 1: Sentidos y Cuerpo
            { question: "¬øCon qu√© parte del cuerpo PUEDES OLER?üëÉ", answer: 'NARIZ', options: ['MANO', 'NARIZ', 'OJO'], level: 1 },
            { question: "¬øQu√© √≥rgano usamos para ESCUCHAR?üëÇ", answer: 'OREJA', options: ['BOCA', 'OREJA', 'PIE'], level: 1 },
            { question: "¬øQu√© sentido usas para SABOREAR la comida?üëÖ", answer: 'GUSTO', options: ['VISTA', 'O√çDO', 'GUSTO'], level: 1 },
            { question: "¬øC√≥mo se llama el hueso duro que protege el cerebro?", answer: 'CR√ÅNEO', options: ['COSTILLA', 'CR√ÅNEO', 'FEMUR'], level: 1 },
            { question: "¬øCu√°l de estos es un LUGAR de la comunidad?", answer: 'PARQUE', options: ['TEL√âFONO', 'PARQUE', 'SILLA'], level: 1 },

            // Nivel 2: Reglas de la Comunidad y Roles
            { question: "¬øQu√© significa el color ROJO en el sem√°foro?üö¶", answer: 'ALTO', options: ['AVANZA', 'ESPERA', 'ALTO'], level: 2 },
            { question: "¬øQui√©n protege y ayuda a las personas en la ciudad?", answer: 'POLIC√çA', options: ['CHEF', 'MAESTRO', 'POLIC√çA'], level: 2 },
            { question: "¬øSi un desconocido te ofrece dulces, ¬øqu√© debes decir?", answer: 'NO', options: ['S√ç', 'GRACIAS', 'NO'], level: 2 },
            { question: "¬øQu√© hacemos con la basura?", answer: 'BOTARLA EN EL BASURERO', options: ['TIRARLA AL SUELO', 'BOTARLA EN EL BASURERO', 'QUEMARLA'], level: 2 },
            { question: "¬øQui√©n hace el PAN y los pasteles?", answer: 'PANADERO', options: ['CARNICERO', 'PANADERO', 'PILOTO'], level: 2 },

            // Nivel 3: El Planeta y el Tiempo
            { question: "¬øCu√°l es el nombre de nuestro planeta?", answer: 'TIERRA', options: ['MARTE', 'J√öPITER', 'TIERRA'], level: 3 },
            { question: "¬øQu√© hace el SOL en el D√çA?", answer: 'BRILLA', options: ['LLUEVE', 'BRILLA', 'NIEVA'], level: 3 },
            { question: "¬øQu√© ocurre cuando el sol se OCULTA?", answer: 'NOCHE', options: ['D√çA', 'TARDE', 'NOCHE'], level: 3 },
            { question: "¬øCu√°l es el primer d√≠a de la semana?", answer: 'LUNES', options: ['DOMINGO', 'S√ÅBADO', 'LUNES'], level: 3 },
            { question: "¬øQu√© estaci√≥n viene despu√©s del VERANO?", answer: 'OTO√ëO', options: ['INVIERNO', 'PRIMAVERA', 'OTO√ëO'], level: 3 },
        ];
        
        // --- Funciones de Utilidad ---
        
        const shuffleArray = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        };

        const generateFalseOption = (correctAnswer, max, existingOptions) => {
            let option;
            do {
                // Genera un n√∫mero entre 1 y max
                option = Math.floor(Math.random() * max) + 1;
            } while (option === correctAnswer || existingOptions.includes(option));
            return option;
        };

        // --- L√≥gica de los Juegos (Generaci√≥n de Preguntas) ---

        function generateMathQuestion(level) {
            const levelQuestions = MATH_QUESTIONS.filter(q => q.level === level);

            if (levelQuestions.length === 0) return null;
            const q = levelQuestions[Math.floor(Math.random() * levelQuestions.length)];
            
            let correctAnswer, questionText, displayContent = '';
            
            if (q.type === 'count') {
                correctAnswer = q.count;
                questionText = `¬°A contar! ¬øCu√°ntas ${q.object.split(' ')[0]} ves?`;
                const emoji = q.object.split(' ')[1] || '‚≠ê';
                // Genera el string de emojis
                for (let i = 0; i < q.count; i++) {
                    displayContent += emoji + ' ';
                }
            } else if (q.type === 'sum') {
                correctAnswer = q.num1 + q.num2;
                questionText = `¬øCu√°nto es ${q.num1} m√°s ${q.num2}?`;
                displayContent = `${q.num1} ‚ûï ${q.num2}`;
            } else if (q.type === 'subtract') {
                correctAnswer = q.num1 - q.num2;
                questionText = `¬øCu√°nto es ${q.num1} menos ${q.num2}?`;
                displayContent = `${q.num1} ‚ûñ ${q.num2}`;
            } else if (q.type === 'sequence') {
                correctAnswer = q.answer;
                questionText = q.question;
                displayContent = `${q.start}, ${q.start + q.step}, ..., ?`;
            }

            // Manejo de opciones de respuesta (diferente si es texto o n√∫mero)
            const options = [];
            if (q.options) {
                // Para preguntas con opciones de texto predefinidas (como secuencias o rimas)
                options.push(correctAnswer);
                const falseOptions = q.options.filter(opt => opt !== correctAnswer);
                // A√±ade hasta 2 opciones falsas de la lista
                while (options.length < 3 && falseOptions.length > 0) {
                    const randomIndex = Math.floor(Math.random() * falseOptions.length);
                    const falseOption = falseOptions.splice(randomIndex, 1)[0];
                    if (!options.includes(falseOption)) {
                        options.push(falseOption);
                    }
                }
            } else {
                // Para preguntas de c√°lculo (n√∫meros)
                options.push(correctAnswer);
                const maxOption = q.max || 12;
                while (options.length < 3) {
                    options.push(generateFalseOption(correctAnswer, maxOption, options));
                }
            }

            gameData = {
                type: 'math',
                questionText: questionText,
                displayContent: displayContent,
                correctAnswer: correctAnswer,
                options: shuffleArray(options)
            };
        }


        function generateReadingQuestion(level) {
            const levelQuestions = READING_QUESTIONS.filter(q => q.level === level);

            if (levelQuestions.length === 0) return null;
            const q = levelQuestions[Math.floor(Math.random() * levelQuestions.length)];
            
            gameData = {
                type: 'reading',
                questionText: q.question,
                displayContent: q.answer,
                correctAnswer: q.answer,
                options: shuffleArray(q.options)
            };
        }

        function generateSocialQuestion(level) {
            const levelQuestions = SOCIAL_QUESTIONS.filter(q => q.level === level);

            if (levelQuestions.length === 0) return null;
            const q = levelQuestions[Math.floor(Math.random() * levelQuestions.length)];
            
            gameData = {
                type: 'social',
                questionText: q.question,
                // Muestra solo el emoji (si existe) o la pregunta completa si no
                displayContent: q.question.includes('?') ? q.question.slice(q.question.lastIndexOf(' ') + 1) : q.question,
                correctAnswer: q.answer,
                options: shuffleArray(q.options)
            };
        }

        // --- Manejo de la Respuesta y Transici√≥n ---

        function checkAnswer(selectedOption, element) {
            document.querySelectorAll('.option-tile').forEach(btn => btn.disabled = true);
            
            if (selectedOption == gameData.correctAnswer) {
                score += 10;
                element.classList.add('correct-answer');
                showMessage('¬°CORRECTO! üéâ', '¬°Has ganado poder, Diamond Warrior!');
                setTimeout(() => nextQuestion(), 2000);
            } else {
                element.classList.add('incorrect-answer');
                document.querySelectorAll('.option-tile').forEach(btn => {
                    if (btn.textContent.trim() == gameData.correctAnswer) {
                        btn.classList.add('correct-answer');
                    }
                });
                showMessage('¬°Int√©ntalo de nuevo! üí™', `La respuesta es: ${gameData.correctAnswer}`);
                setTimeout(() => nextQuestion(), 3000);
            }
        }

        function showMessage(title, message) {
            const messageBox = document.createElement('div');
            messageBox.className = 'message-box';
            messageBox.innerHTML = `
                <div class="message-content">
                    <div class="text-3xl mb-3">${title}</div>
                    <div class="text-xl">${message}</div>
                </div>
            `;
            document.body.appendChild(messageBox);
            setTimeout(() => messageBox.remove(), 2500); 
        }

        function nextQuestion() {
            currentLevel++;
            if (currentLevel > 3) {
                // FIN del juego, vuelve al men√∫ principal
                window.renderScreen('mainMenu');
            } else {
                // Carga la siguiente pregunta del mismo tema
                if (gameData.type === 'math') {
                    generateMathQuestion(currentLevel);
                    window.renderScreen('mathGame');
                } else if (gameData.type === 'reading') {
                    generateReadingQuestion(currentLevel);
                    window.renderScreen('readingGame');
                } else if (gameData.type === 'social') {
                    generateSocialQuestion(currentLevel);
                    window.renderScreen('socialGame');
                }
            }
        }

        // --- Funciones de Renderizado (UI) ---

        function renderMainMenu() {
            currentScreen = 'mainMenu';
            currentLevel = 1;
            const maxScore = localStorage.getItem('kidIdolsMaxScore') || 0;
            score = 0;
            
            app.innerHTML = `
                <div class="main-card p-8 rounded-3xl text-center">
                    <h1 class="title-main text-6xl mb-4 leading-tight">
                        K-IDOLS<br>üíé WARRIORS üíé
                    </h1>
                    <p class="text-3xl font-extrabold text-cyan-600 mb-6">
                         ¬°EDICI√ìN 6 A√ëOS!
                    </p>
                    <p class="text-xl font-bold text-pink-600 mb-8">
                        ¬°Convi√©rtete en una Diamond Warrior!
                    </p>

                    <div class="space-y-4">
                        <button onclick="startGame('math')" class="game-button btn-pink w-full">
                            üî¢ C√ÅLCULOS AVANZADOS
                        </button>
                        <button onclick="startGame('reading')" class="game-button btn-cyan w-full">
                            üìö S√çLABAS Y RIMAS
                        </button>
                        <button onclick="startGame('social')" class="game-button btn-yellow w-full">
                            üíñ MI COMUNIDAD
                        </button>
                    </div>
                    <div class="mt-8 p-4 bg-white bg-opacity-70 rounded-xl text-lg font-bold text-pink-700 border-2 border-pink-300">
                         Puntuaci√≥n M√°xima: <span id="maxScore">${maxScore}</span> ‚≠ê
                    </div>
                    
                    <!-- REQUERIMIENTO DEL CLIENTE -->
                    <div class="mt-6 text-center text-sm font-bold text-gray-700">
                        <p>Creado y mantenido por **neuralcodelab.com**.</p>
                        <p class="text-xs text-gray-500">Cont√°ctanos para mejoras o nuevas funciones.</p>
                    </div>
                </div>
            `;
            document.getElementById('maxScore').textContent = maxScore;
        }

        function renderGameScreen() {
            const gameTitle = {
                'math': 'üî¢ ENTRENAMIENTO MATEM√ÅTICO',
                'reading': 'üìö GUERRERO DE PALABRAS',
                'social': 'üíñ H√âROE SOCIAL'
            }[currentScreen];

            app.innerHTML = `
                <div class="main-card p-6 rounded-3xl text-center">
                    <div class="flex justify-between items-center mb-6">
                        <button onclick="renderScreen('mainMenu')" class="game-button btn-pink py-2 px-4 text-base">
                            üè† MEN√ö
                        </button>
                        <h2 class="text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-600 to-cyan-500">
                            ${gameTitle}
                        </h2>
                        <div class="score-badge">‚≠ê ${score}</div>
                    </div>
                    
                    <div class="level-badge mb-6">Nivel ${currentLevel} üéØ</div>
                    
                    <p class="text-2xl font-bold text-gray-700 mb-4">${gameData.questionText}</p>
                    
                    <div class="display-content">
                        ${gameData.displayContent}
                    </div>

                    <div id="optionsContainer" class="grid grid-cols-2 gap-4">
                        <!-- Opciones se inyectan aqu√≠ -->
                    </div>
                    
                    <!-- REQUERIMIENTO DEL CLIENTE -->
                    <div class="mt-6 text-center text-xs font-bold text-gray-500">
                        App creada por neuralcodelab.com
                    </div>
                </div>
            `;
            renderOptions();
        }

        function renderOptions() {
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            gameData.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = 'option-tile';
                button.onclick = (e) => checkAnswer(option, e.target);
                optionsContainer.appendChild(button);
            });
        }
        
        // --- Control Principal Globalizado ---
        
        window.startGame = (gameType) => {
            currentLevel = 1;
            score = 0;
            if (gameType === 'math') {
                generateMathQuestion(currentLevel);
                window.renderScreen('mathGame');
            } else if (gameType === 'reading') {
                generateReadingQuestion(currentLevel);
                window.renderScreen('readingGame');
            } else if (gameType === 'social') {
                generateSocialQuestion(currentLevel);
                window.renderScreen('socialGame');
            }
        };

        window.renderScreen = (screenName) => {
            currentScreen = screenName;
            if (screenName === 'mainMenu') {
                renderMainMenu();
            } else if (screenName.endsWith('Game')) {
                const maxScore = parseInt(localStorage.getItem('kidIdolsMaxScore') || 0);
                if (score > maxScore) {
                    localStorage.setItem('kidIdolsMaxScore', score);
                }
                renderGameScreen();
            }
        };
        
        // Inicio de la aplicaci√≥n
        document.addEventListener('DOMContentLoaded', () => {
            window.renderScreen('mainMenu');
        });
        
    </script>
</body>
</html>